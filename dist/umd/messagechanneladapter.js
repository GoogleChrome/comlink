'use strict';(function(g,f){"object"===typeof exports&&"undefined"!==typeof module?f(exports):"function"===typeof define&&define.amd?define(["exports"],f):f(g.Comlink={})})(this,function(g){function f(a,c){void 0===c&&(c=null);var d=new MessageChannel,b=d.port1;k(d.port2,a,c);return b}function k(a,c,d){void 0===d&&(d=null);a.onmessage=function(b){d||(d=l());var e=b.data;b=Array.from(m(b.data));for(var a=0;a<b.length;a++){var h=b[a],f=l();h=n(e,h,f);k(h,c,f)}e=JSON.stringify({id:d,msg:e,messageChannels:b});
c.send(e)};c.addEventListener("message",function(b){var e={};try{e=JSON.parse(b.data)}catch(q){return}d&&d!==e.id||(b=e.messageChannels.map(function(b){var a=b.reduce(function(a,b){return a[b]},e.msg);a=f(c,a);n(e.msg,b,a);return a}),a.postMessage(e.msg,b))})}function n(a,c,d){for(var b=0,e=c.slice(0,-1);b<e.length;b++)a=a[e[b]];c=c[c.length-1];b=a[c];a[c]=d;return b}function m(a,c,d){void 0===c&&(c=[]);void 0===d&&(d=[]);if(!a||"string"===typeof a)return[];if(a instanceof MessagePort)d.push(c.slice());
else for(var b=0,e=Object.keys(a);b<e.length;b++){var f=e[b];c.push(f);m(a[f],c,d);c.pop()}return d}function l(){return Array(p/16).fill(0).map(function(a){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}).join("")}var p=128;g.wrap=f;Object.defineProperty(g,"__esModule",{value:!0})});
